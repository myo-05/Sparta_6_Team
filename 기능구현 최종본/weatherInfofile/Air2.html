<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"
integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" 
crossorigin="anonymous"></script>

<style>
    .Bad {
      color: red;  
    }
    .Normal {
        color: blue;
    }
    .Good {
        color: green;
    }
</style>

<script>

    
   
    $.ajax({
        type: 'GET',
        url:'https://api.openweathermap.org/data/2.5/onecall?lat=${lat}&lon=${lon}&exclude=daily&appid=4a992b233723cebcd77991cb28f2bd39&units=metric',
        dataType:'json',
        success: function(response) {
            let $humid= response['current']['humidity']; //현재습도
            let $wind= response['current']['wind_speed']; // 현재 풍속
            let $uv= response['current']['uvi'];//현재 자외선 지수
            

            $('.humid').append($humid);
            $('.wind').append($wind);
            $('.uv').append($uv);
            $('.icon').html(wiconUrl)

          
        // 시간별 자외선 지수
        let uvis= response['hourly']
        for (let i= 0; i< uvis.length; i++) {
            let cuv= uvis[i]['uvi']
        

            let cuvi= `` 

            if (cuvi >= 7.0) {
                    cuvi= (`<li class='Bad'>${cuv}</li>`)
            } else if(cuvi >= 5.0) {
                    cuvi= (`<li class='Normal'>${cuv}</li>`)
            } else {
                    cuvi= (`<li class='Good'>${cuv}</li>`)
            }

            
            $('#suvi').append(cuvi) //현재 시간 자외선지수
            $('#suvi').append(cuvi).hide() //현재 시간 이후 자외선지수 감춤
        }
        

        //시간별 기상 상태 
        let hourlys= response['hourly']
        for (let i = 0; i < hourlys.length; i++){
            let ct= hourlys[i]['temp']
            let w= hourlys[i]['weather'][i]

           


        //    $('#con').append(ct)
            $('#con').append(ct).hide()
        //    $('#con').append(w)
            $('#con').append(w).hide()
        }

        

        // console.log(response['hourly'][0]['temp'])
        // console.log(response['hourly'][0]['weather'][0]['icon'])
        // console.log(response['hourly'][0]['weather'][0]['description'])


        var wiconUrl = '<img src="https://openweathermap.org/img/wn/'+response.hourly[0].weather[0].icon + '.png" alt="'+response.hourly[0].weather[0].description+'">'
        
        $('.descrpition').html(wiconUrl)
        
        
        }

        })
    


    </script>

<body>
    <h1>날씨 정보</h1>
    <h2 class="humid">현재 습도(%)</h2>
    <h2 class="wind">현재 풍량(m/s)</h2>
    <h2 class="uv">현재 자외선 지수</h2>
    <h2 class="icon"></h2>
   
    
<li>시간별 자외선 지수</li>
<ul id="suvi"></ul>

<li>시간별 기상 상태</li>
<ul id="con"></ul>

</body>
</html>